---
marp: true
---

# 1 - e2e: End to end

**Test funcionales:**

Controlan los navegadores y simulan el comportamiento del usuario en ellos: hacer clic, escribir, desplazarse, etc.

Las pruebas aseguran que determinados escenarios realmente funcionen desde el punto de vista de un usuario final.

---

## Tools

- [Cypress](https://www.cypress.io/)

### Alternatives

- [Puppeteer](https://pptr.dev/)

- [Protractor](http://www.protractortest.org/#/)

---

## Install and config

```bash
npm i -D cypress
yarn add -D cypress
```

```json
// package.json
{
  "e2e:open" : "cypress open",
  "e2e:run" : "cypress run"
}
// cypress.json
{
  "baseUrl": "http://bitademy.com/",
  "blacklistHosts": "www.google-analytics.com",
}
```

---

## Integration tests

`cypress/integration/behavior_name/page.spec.js`

```js
// FEATURE:     the app should have a well formed html
// As a:        visitor
// I want to:   view the title of the page
// In order to: have feedback
describe('GIVEN: the url https://bitademy.com', () => {
  const sutUrl = 'https://bitademy.com';// Arrange
  context('WHEN: I visit it', () => {
    before(() => {
      cy.visit(sutUrl);// Act
    });
    it('THEN: should have _bitAdemy_ on the Title', () => {
      cy.title().should('include', 'bitAdemy');//Assert
    });
  });
});
```
---

## Selection, interaction and navigation

```js
// FEATURE:     the app should tyake me to clean code page
// As a:        visitor
// I want to:   navigate to the clean code course
// In order to: get more info
describe('GIVEN: the url https://bitademy.com', () => {
  context('WHEN: I visit it', () => {
    before(() => {
      const sutUrl = 'https://bitademy.com';// Arrange
      cy.visit(sutUrl);
      cy.get("#first > div > ul:nth-child(2) > li:nth-child(1) > a").as("a_clean_code");
      cy.get("@a_clean_code").click();// Act
    });
    it('THEN: should have _bitAdemy_ on the Title', () => {
      cy.location().should((loc) => expect(loc.pathname).to.eq('/clean-code/'))//Assert
    });
  });
});
```
---
Move to labsAdemy
---
---

## Teacher Sample

- [e2e-ToDoList](https://github.com/AcademiaBinaria/e2e-ToDoList)

<!-- #### Funcional tests already done -->

- **FEATURE:** the app should have a well formed html
  - _As a_ user
  - _I want to_ view a web page
  - _In order to_ use it

- **FEATURE:** the app should allow me to create new tasks
  - _As a_ user
  - _I want to_ create new tasks
  - _In order to_ do my work

- **FEATURE:**  the app should allow me to mark tasks as completed
  - _As a_ user
  - _I want to_ mark a task as completed
  - _In order to_ focus on my work uncompleted work

---

### SUT

- [ToDoList](https://academiabinaria.github.io/ToDoList/)

## Student Practice

> Use this template as a starting project:

- [Detector](https://github.com/AtomicBuilders/detector)

### SUT

- [Projects CRUD](https://angularbuilders.github.io/angular-begins/projects)

---

### Functional tests to de done

#### Beginner

- **Feature:** a programmer can create a project
  - _As a_ programmer
  - _I want to_ create projects
  - _In order to_ see a list of my work
  - **Scenario:** I am on the project registration page
    - _Given_ I have a form
    - _When_ I fill it in and press save
    - _Then_ the list should contain the new project

---

#### Boss

- **Feature:** a programmer can delete a project
  - _As a_ programmer
  - _I want to_ delete projects
  - _In order to_ see a list of my current real work
  - **Scenario:** I am on the project list page
    - _Given_ I have a list of projects
    - _When_ I click on one of them
    - _Then_ I should navigate to this project page
  - **Scenario:** I am on the page of an project
    - _Given_ I have a delete button
    - _When_ I click the delete button
    - _Then_ I should navigate to the main projects page
    - _And Then_ I should not found the deleted project